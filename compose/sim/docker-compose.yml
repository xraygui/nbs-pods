version: '3'

networks:
  bluesky-services_bluesky:
    external: true

services:
  nbs-sim:
    image: nbs_sim:latest
    volumes:
      - ${HOME}/work/nsls-ii-sst:/usr/local/src/nsls-ii-sst
      - ${HOME}/work/caproto:/usr/local/src/caproto
      - ${HOME}/work/xraygui:/usr/local/src/xraygui
      - ../../config/ipython:/usr/local/share/ipython
    command: >
      bash -c "
        bash /usr/local/bin/run_dev.sh &&
        nbs-sim --startup-dir /usr/local/share/ipython/profile_default/startup --list-pvs
      "
    networks:
      - bluesky-services_bluesky
